#pragma once

///////////////////////////////////////////////////////////////////////////
// Headers
///////////////////////////////////////////////////////////////////////////
#include <Util/Time.hpp>
#include <Ecs/Entity.hpp>
#include <Ecs/Component.hpp>



namespace xrn::ecs::system {

///////////////////////////////////////////////////////////////////////////
/// \brief Representation of how a system is stocked in containers
/// \ingroup ecs-system
///
/// \include ASystem.hpp <Ecs/System/ASystem.hpp>
///
/// ::xrn::ecs::system::ASystem represents how a system is stocked inside a
/// ::xrn::ecs::system::Container.
/// This class is aliased with ::xrn::ecs::ASystem.
///
/// Usage example:
/// \code
/// \endcode
///
/// \see ::xrn::ecs::system::System, ::xrn::ecs::system::Container
///
///////////////////////////////////////////////////////////////////////////
class ASystem {

public:

    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    // Constructor
    //
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////

    ///////////////////////////////////////////////////////////////////////////
    /// \brief Constructor
    ///
    ///////////////////////////////////////////////////////////////////////////
    ASystem() noexcept;



    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    // Rule of 5
    //
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////

    ///////////////////////////////////////////////////////////////////////////
    /// \brief Destructor
    ///
    ///////////////////////////////////////////////////////////////////////////
    virtual ~ASystem() noexcept = 0;

    ///////////////////////////////////////////////////////////////////////////
    /// \brief Copy constructor
    ///
    ///////////////////////////////////////////////////////////////////////////
    ASystem(
        const ::xrn::ecs::system::ASystem& other
    ) noexcept = delete;

    ///////////////////////////////////////////////////////////////////////////
    /// \brief Copy assign operator
    ///
    ///////////////////////////////////////////////////////////////////////////
    auto operator=(
        const ::xrn::ecs::system::ASystem& other
    ) noexcept
        -> ::xrn::ecs::system::ASystem& = delete;

    ///////////////////////////////////////////////////////////////////////////
    /// \brief Move constructor
    ///
    ///////////////////////////////////////////////////////////////////////////
    ASystem(
        ::xrn::ecs::system::ASystem&& that
    ) noexcept = delete;

    ///////////////////////////////////////////////////////////////////////////
    /// \brief Move assign operator
    ///
    ///////////////////////////////////////////////////////////////////////////
    auto operator=(
        ::xrn::ecs::system::ASystem&& that
    ) noexcept
        -> ::xrn::ecs::system::ASystem& = delete;



    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////
    // Run
    //
    ///////////////////////////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////

    ///////////////////////////////////////////////////////////////////////////
    /// \brief Runs the system as const
    ///
    /// \param deltaTime Represents the time passed by the user. It is usually
    ///                  used to know the elapsed since the last runs of
    ///                  systems
    /// \param entities  Container of entities that the system will act upon
    ///
    /// \see ::xrn::Time, ::xrn::ecs::entity::Container
    ///
    ///////////////////////////////////////////////////////////////////////////
    virtual void operator()(
        ::xrn::Time t,
        ::xrn::ecs::entity::Container& entities
    ) = 0;

    ///////////////////////////////////////////////////////////////////////////
    /// \brief Runs the system as const
    ///
    /// \param deltaTime Represents the time passed by the user. It is usually
    ///                  used to know the elapsed since the last runs of
    ///                  systems
    /// \param entities  Container of entities that the system will act upon
    ///
    /// \see ::xrn::Time, ::xrn::ecs::entity::Container
    ///
    ///////////////////////////////////////////////////////////////////////////
    virtual void operator()(
        ::xrn::Time t,
        const ::xrn::ecs::entity::Container& entities
    ) const = 0;

};

} // namespace xrn::ecs::system



///////////////////////////////////////////////////////////////////////////
// Alias name
///////////////////////////////////////////////////////////////////////////
namespace xrn::ecs { using ASystem = ::xrn::ecs::system::ASystem; }
