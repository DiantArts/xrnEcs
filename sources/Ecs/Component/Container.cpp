///////////////////////////////////////////////////////////////////////////
// Precompilled headers
///////////////////////////////////////////////////////////////////////////
#include <pch.hpp>

///////////////////////////////////////////////////////////////////////////
// Headers
///////////////////////////////////////////////////////////////////////////
#include <Ecs/Component/Container.hpp>



///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
// Constructors
//
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////
::xrn::ecs::component::Container::Container()
    : m_memoryManager{ m_data }
    , m_data{}
{
    m_data.reserve(Container::defaultBaseSize);
}

///////////////////////////////////////////////////////////////////////////
::xrn::ecs::component::Container::Container(
    ::std::size_t size
)
    : m_memoryManager{ m_data }
    , m_data{}
{
    m_data.reserve(size);
}



///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
// Rule of 5
//
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////
::xrn::ecs::component::Container::~Container()
{
    this->clearAll();
}

///////////////////////////////////////////////////////////////////////////
::xrn::ecs::component::Container::Container(
    ::xrn::ecs::component::Container&& that
) noexcept = default;

///////////////////////////////////////////////////////////////////////////
auto ::xrn::ecs::component::Container::operator=(
    ::xrn::ecs::component::Container&& that
) noexcept
    -> ::xrn::ecs::component::Container& = default;



///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
// Clear
//
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////
void ::xrn::ecs::component::Container::clear()
{
    this->clearAll();
}

///////////////////////////////////////////////////////////////////////////
void ::xrn::ecs::component::Container::clearAll()
{
    m_memoryManager.clearAll();
}
